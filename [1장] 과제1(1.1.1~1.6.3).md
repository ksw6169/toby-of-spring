## 1.4 제어의 역전(IoC, Inversion of Control)
개발자가 작성한 코드를 통해 객체를 생성하고, 메소드를 호출하는 등 코드를 사용하는 쪽에서 프로그램의 실행 흐름을 제어하는 것이 아니라, 역으로 **프레임워크나 컨테이너 등이 제어권을 가지고 프로그램의 실행 흐름을 제어하는 것을 제어의 역전**이라 한다.
```java
// A 클래스의 생성자에서 B 클래스의 객체를 생성한다. (사용하는 쪽에서 실행 흐름을 제어)
public class A {
    private B b;
	
    public A() {
        b = new B();
    }
}

// 스프링 프레임워크가 미리 생성해둔 B 객체를 A 클래스에 주입하여 사용할 수 있게 한다. (프레임워크에서 실행 흐름을 제어)
public class A {
    @Autowired
    private B b;
}
```

<br>

## 1.5 스프링의 IoC
### 1.5.1 오브젝트 팩토리를 이용한 스프링 IoC

- `@Configuration` : 애플리케이션 컨텍스트 또는 빈 팩토리가 사용할 설정정보라는 표시
- `@Bean` : 메서드에서 반환하는 객체를 애플리케이션 컨텍스트 또는 빈 팩토리의 빈으로 등록하고자 할 때 사용하는 표시(`@Configuration` 어노테이션을 사용한 클래스 내에서만 사용 가능하다.)

```java
/**
 * userDao, connectionMaker Bean 등록
 */
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class DaoFactory {

    @Bean
    public UserDao userDao() {
        return new UserDao(connectionMaker());
    }

    @Bean
    public ConnectionMaker connectionMaker() {
        return new DConnectionMaker();
    }
}
```
```java
/**
 * 애플리케이션 컨텍스트에 등록된 빈 목록에서 userDao 빈 조회
 */
public class TestApplication {
    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        ApplicationContext context = new AnnotationConfigApplicationContext(DaoFactory.class);
        UserDao userDao = context.getBean("userDao", UserDao.class);
    }
}
```

<br>

### 1.5.2 애플리케이션 컨텍스트의 동작방식
1. `@Configuration`이 붙은 클래스를 설정 정보로 등록한다.
2. `@Configuration` 클래스 내의 `@Bean`이 붙은 메소드의 이름을 가져와 빈 목록을 만든다.
3. 클라이언트가 애플리케이션 컨텍스트의 `getBean()` 메소드를 호출한다.
4. 빈 목록에서 클라이언트가 요청한 이름의 빈이 있는지 찾고, 있다면 빈을 생성하여 반환한다.

<br>

### 애플리케이션 컨텍스트의 장점
- 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다.
- 종합 IoC 서비스를 제공한다.
- 빈을 검색하는 다양한 방법을 제공한다.

<br>

### 1.5.3 스프링 IoC의 용어 정리
**빈(bean)**
- 스프링 프레임워크가 IoC 방식으로 관리하는 객체(스프링이 직접 생성과 제어를 담당하는 객체)

<br>

**빈 팩토리(bean factory)**
- 스프링의 IoC를 담당하는 핵심 컨테이너
- 빈 관리 기능(빈 등록, 생성, 조회, 반환 등)을 담당한다.
- 빈 팩토리는 바로 사용하지 않고 이를 확장한 애플리케이션 컨텍스트를 이용한다. 

<br>

**애플리케이션 컨텍스트(application context)**
- 빈 팩토리를 확장한 IoC 컨테이너
- 빈 관리 기능에 더불어 Spring이 제공하는 각종 부가 기능을 추가로 제공

<br>

**설정정보/설정 메타정보(configuration metadata)**
- 애플리케이션 컨텍스트 또는 빈 팩토리가 IoC를 적용하기 위해 사용하는 메타정보
- 컨테이너에 어떤 기능을 설정하거나 조정하는 경우에도 사용하나, 그보다는 IoC 컨테이너에 의해 관리되는 빈 객체를 생성하고 구성할 때 사용된다.

<br>

**컨테이너 또는 IoC 컨테이너**
- 애플리케이션 컨텍스트, 빈 팩토리와 동일하나, IoC 방식으로 빈을 관리한다는 의미에서 다르게 말할 때 사용
- 애플리케이션 컨텍스트는 ApplicationContext 인터페이스를 구현한 오브젝트를 가리키기도 하는데, 하나의 애플리케이션에서 보통 여러 개가 만들어져 사용된다. 이를 통틀어서 스프링 컨테이너라고 부를 수 있다.

<br>

**스프링 프레임워크**
- IoC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 주로 사용하는 용어

<br>

## 1.6 싱글톤 레지스트리와 오브젝트 스코프

작성중

<br>

## 참고 자료
- 토비의 스프링 3.1
- DI / IoC 정리 : https://velog.io/@sudhez_a/DI-IoC-%EC%A0%95%EB%A6%AC